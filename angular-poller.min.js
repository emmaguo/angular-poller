/*! angular-poller v0.1.3 01-04-2014 */
!function(a,b){"use strict";b.module("emguo.poller",[]).factory("poller",["$timeout","$q",function(a,c){var d=[],e={action:"query",delay:5e3,params:{}},f=function(a,b){this.resource=a,this.set(b)},g=function(a){var c=null;return b.forEach(d,function(d){b.equals(d.resource,a)&&(c=d)}),c};return b.extend(f.prototype,{set:function(a){b.forEach(["action","delay","params"],function(b){a&&a[b]?this[b]=a[b]:this[b]||(this[b]=e[b])},this)},start:function(){var b=this.resource,d=this.action,e=this.delay,f=this.params,g=this;this.deferred||(this.deferred=c.defer()),function h(){b[d](f,function(a){g.deferred.notify(a)}),g.timeout=a(h,e)}(),this.promise=this.deferred.promise},stop:function(){a.cancel(this.timeout),this.timeout.$$timeoutId=null},restart:function(){this.timeout.$$timeoutId&&this.stop(),this.start()}}),{get:function(a,b){var c=g(a);return c?(c.set(b),c.restart()):(c=new f(a,b),d.push(c),c.start()),c},size:function(){return d.length},stopAll:function(){b.forEach(d,function(a){a.stop()})},restartAll:function(){b.forEach(d,function(a){a.restart()})},reset:function(){this.stopAll(),d=[]}}}])}(window,window.angular);